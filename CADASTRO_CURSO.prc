CREATE OR RELACE PROCEDURE CADASTRO_CURSO (COD_CURSO IN  CURSO.COD_CURSO %TYPE,
DESC_CURSO IN  CURSO.DESC_CURSO %TYPE,
DATA_INCLUSAO IN  CURSO.DATA_INCLUSAO %TYPE,
DATA_EXCLUSAO IN  CURSO.DATA_EXCLUSAO %TYPE)
 IS
 
BEGIN


INSERT INTO CURSO (
COD_CURSO,
DESC_CURSO,
DATA_INCLUSAO,
DATA_EXCLUSAO,
USUARIO_INSERCAO_REGISTRO,
DATA_INSERCAO_REGISTO,
VERSAO)
SELECT CURSO_SEQ.NEXTVAL ,
P_DESC_CURSO,
P_DATA_INCLUSAO ,
P_DATA_EXCLUSAO ,
GET_USUARIO_SISTEMA,
SYSDATE,
0 FROM CURSO
WHERE DESC_CURSO = P_DESC_CURSO
HAVING COUNT(*) = 0;
COMMIT;


EXCEPTION 
WHEN OTHERS THEN
ROOLBACK;
raise_application_error(-200007, 'Erro CURSO '||sqlerrm);
END;

END CADASTRO_CURSO;